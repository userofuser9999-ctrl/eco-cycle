import React, { useState, useEffect } from 'react';
import { Leaf, Recycle, Home, ArrowRight, BarChart3, Users, Factory, Package, Calculator } from 'lucide-react';

const EcoCycleApp = () => {
  const [activeStep, setActiveStep] = useState(0);
  const [bottlesInput, setBottlesInput] = useState(100);
  const [scrolled, setScrolled] = useState(false);

  // Handle scroll for navbar transparency
  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const steps = [
    {
      title: "შეგროვება",
      desc: "ვაგროვებთ PET ბოთლებსა და პლასტმასის ნარჩენებს მოსახლეობისგან და ბიზნესებისგან.",
      icon: <Recycle className="w-12 h-12 text-green-600" />
    },
    {
      title: "დაქუცმაცება",
      desc: "სპეციალური დანადგარები აქუცმაცებენ პლასტმასს პატარა გრანულებად.",
      icon: <Factory className="w-12 h-12 text-blue-600" />
    },
    {
      title: "თერმული დამუშავება",
      desc: "გრანულები დნება უსაფრთხო ტემპერატურაზე და ერევა სილას სიმყარისთვის.",
      icon: <Leaf className="w-12 h-12 text-orange-500" />
    },
    {
      title: "პროდუქტის შექმნა",
      desc: "ვიღებთ უმაღლესი ხარისხის ეკო-ფილებს და ქუჩის ავეჯს.",
      icon: <Package className="w-12 h-12 text-teal-600" />
    }
  ];

  const products = [
    { name: "ეკო-ფილები", image: "linear-gradient(135deg, #a8e063 0%, #56ab2f 100%)", desc: "გამძლე, წყალგამძლე ფილები ეზოებისთვის." },
    { name: "პარკის სკამები", image: "linear-gradient(135deg, #fce38a 0%, #f38181 100%)", desc: "კომფორტული სკამები, რომლებიც არ ლპება." },
    { name: "სანაგვე ურნები", image: "linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)", desc: "თანამედროვე დიზაინის ურნები ქალაქისთვის." }
  ];

  // Calculation logic: approx 50 bottles = 1 tile
  const tilesCreated = Math.floor(bottlesInput / 50);

  return (
    <div className="min-h-screen bg-gray-50 font-sans text-gray-800">
      
      {/* Navigation */}
      <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'bg-white/90 backdrop-blur-md shadow-md py-3' : 'bg-transparent py-5'}`}>
        <div className="container mx-auto px-6 flex justify-between items-center">
          <div className="flex items-center gap-2">
            <div className="bg-green-600 p-2 rounded-full">
              <Recycle className="text-white w-6 h-6" />
            </div>
            <span className={`text-2xl font-bold ${scrolled ? 'text-green-800' : 'text-green-800 md:text-white'}`}>Eco-Cycle</span>
          </div>
          <div className="hidden md:flex gap-8 font-medium">
            <a href="#home" className={`${scrolled ? 'text-gray-600 hover:text-green-600' : 'text-white/90 hover:text-white'}`}>მთავარი</a>
            <a href="#process" className={`${scrolled ? 'text-gray-600 hover:text-green-600' : 'text-white/90 hover:text-white'}`}>პროცესი</a>
            <a href="#calculator" className={`${scrolled ? 'text-gray-600 hover:text-green-600' : 'text-white/90 hover:text-white'}`}>კალკულატორი</a>
            <a href="#products" className={`${scrolled ? 'text-gray-600 hover:text-green-600' : 'text-white/90 hover:text-white'}`}>პროდუქცია</a>
          </div>
          <button className="bg-green-500 hover:bg-green-400 text-white px-5 py-2 rounded-full font-bold shadow-lg transition transform hover:-translate-y-1">
            შემოგვიერთდი
          </button>
        </div>
      </nav>

      {/* Hero Section */}
      <section id="home" className="relative h-[600px] flex items-center justify-center overflow-hidden">
        {/* Abstract Background */}
        <div className="absolute inset-0 bg-gradient-to-br from-green-900 via-green-700 to-teal-800 z-0"></div>
        <div className="absolute inset-0 opacity-20" style={{ backgroundImage: 'radial-gradient(circle at 2px 2px, white 1px, transparent 0)', backgroundSize: '40px 40px' }}></div>
        
        {/* Content */}
        <div className="container mx-auto px-6 relative z-10 text-center">
          <div className="inline-block bg-white/20 backdrop-blur-sm px-4 py-1 rounded-full text-green-100 mb-6 border border-white/30 animate-pulse">
            🌱 CENN-ის მხარდაჭერილი პროექტი
          </div>
          <h1 className="text-4xl md:text-6xl font-extrabold text-white mb-6 leading-tight">
            ნარჩენი არ არის ნაგავი,<br />
            ის <span className="text-green-300">ახალი ნივთის</span> დასაწყისია!
          </h1>
          <p className="text-xl text-green-100 mb-10 max-w-2xl mx-auto">
            ჩვენ ვაგროვებთ პლასტმასს და ვაქცევთ მას ეკოლოგიურად სუფთა სამშენებლო მასალად და ავეჯად.
          </p>
          <div className="flex flex-col md:flex-row gap-4 justify-center">
            <button className="bg-white text-green-800 px-8 py-3 rounded-full font-bold text-lg hover:bg-green-50 transition shadow-xl flex items-center justify-center gap-2">
              გაიგე მეტი <ArrowRight size={20} />
            </button>
          </div>
        </div>
        
        {/* Floating Abstract Shapes */}
        <div className="absolute -bottom-10 -left-10 w-40 h-40 bg-green-400 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"></div>
        <div className="absolute top-10 -right-10 w-40 h-40 bg-teal-400 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"></div>
      </section>

      {/* Stats Section */}
      <div className="container mx-auto px-6 -mt-16 relative z-20">
        <div className="bg-white rounded-2xl shadow-xl p-8 grid grid-cols-1 md:grid-cols-3 gap-8 text-center border-b-4 border-green-500">
          <div>
            <div className="text-4xl font-bold text-green-600 mb-2">450 წელი</div>
            <p className="text-gray-500 font-medium">სჭირდება პლასტმასს დაშლისთვის</p>
          </div>
          <div>
            <div className="text-4xl font-bold text-blue-600 mb-2">100%</div>
            <p className="text-gray-500 font-medium">ეკოლოგიურად სუფთა წარმოება</p>
          </div>
          <div>
            <div className="text-4xl font-bold text-orange-500 mb-2">0 ნარჩენი</div>
            <p className="text-gray-500 font-medium">ჩვენი მიზანი მომავლისთვის</p>
          </div>
        </div>
      </div>

      {/* Process Section (Interactive) */}
      <section id="process" className="py-20 bg-white">
        <div className="container mx-auto px-6">
          <div className="text-center mb-16">
            <h2 className="text-3xl font-bold text-gray-800 mb-4">როგორ ვმუშაობთ?</h2>
            <div className="w-20 h-1 bg-green-500 mx-auto rounded-full"></div>
            <p className="mt-4 text-gray-600">ჩვენი ტექნოლოგიური ციკლი მარტივია და ეფექტური</p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            {/* Steps List */}
            <div className="space-y-4">
              {steps.map((step, index) => (
                <div 
                  key={index}
                  onClick={() => setActiveStep(index)}
                  className={`p-6 rounded-xl cursor-pointer transition-all duration-300 border-l-4 flex items-center gap-4 ${
                    activeStep === index 
                      ? 'bg-green-50 border-green-500 shadow-md transform scale-102' 
                      : 'bg-white border-gray-200 hover:bg-gray-50'
                  }`}
                >
                  <div className={`p-3 rounded-full ${activeStep === index ? 'bg-white shadow-sm' : 'bg-gray-100'}`}>
                    {step.icon}
                  </div>
                  <div>
                    <h3 className={`font-bold text-lg ${activeStep === index ? 'text-green-800' : 'text-gray-700'}`}>{step.title}</h3>
                    {activeStep === index && (
                      <p className="text-gray-600 text-sm mt-1 animate-fadeIn">{step.desc}</p>
                    )}
                  </div>
                </div>
              ))}
            </div>

            {/* Visual Representation */}
            <div className="bg-gray-100 rounded-3xl p-8 h-[400px] flex flex-col items-center justify-center relative overflow-hidden shadow-inner">
              <div className="absolute inset-0 bg-green-900/5 pattern-grid-lg"></div>
              
              <div className="relative z-10 text-center transition-all duration-500 transform">
                <div className="bg-white p-8 rounded-full shadow-2xl mb-6 inline-block ring-8 ring-green-100">
                  {steps[activeStep].icon}
                </div>
                <h3 className="text-2xl font-bold text-gray-800 mb-2">{steps[activeStep].title}</h3>
                <p className="text-gray-600 max-w-xs mx-auto text-center">
                  ეტაპი {activeStep + 1} / 4
                </p>
              </div>

              {/* Progress Dots */}
              <div className="flex gap-2 mt-8">
                {steps.map((_, idx) => (
                  <div key={idx} className={`w-3 h-3 rounded-full transition-all duration-300 ${activeStep === idx ? 'bg-green-500 w-8' : 'bg-gray-300'}`}></div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Interactive Calculator Section */}
      <section id="calculator" className="py-20 bg-gradient-to-r from-teal-600 to-green-700 text-white">
        <div className="container mx-auto px-6">
          <div className="flex flex-col md:flex-row items-center gap-12">
            <div className="md:w-1/2">
              <h2 className="text-3xl md:text-4xl font-bold mb-6">შექმენი გავლენა!</h2>
              <p className="text-green-100 text-lg mb-8 leading-relaxed">
                გაინტერესებს, რამხელა სარგებლის მოტანა შეგიძლია? გამოიყენე ჩვენი კალკულატორი და ნახე, როგორ იქცევა შენი ნაგავი სასარგებლო ნივთად.
              </p>
              <ul className="space-y-4">
                <li className="flex items-center gap-3">
                  <div className="bg-white/20 p-2 rounded-full"><Leaf size={20} /></div>
                  <span>ზოგავს ბუნებრივ რესურსებს</span>
                </li>
                <li className="flex items-center gap-3">
                  <div className="bg-white/20 p-2 rounded-full"><Home size={20} /></div>
                  <span>ამცირებს ნაგავსაყრელებს</span>
                </li>
              </ul>
            </div>

            <div className="md:w-1/2 bg-white rounded-3xl p-8 shadow-2xl text-gray-800">
              <div className="flex items-center gap-3 mb-6">
                <Calculator className="text-green-600" />
                <h3 className="text-2xl font-bold">ზემოქმედების კალკულატორი</h3>
              </div>
              
              <div className="mb-8">
                <label className="block text-sm font-bold text-gray-600 mb-2">რამდენი პლასტმასის ბოთლი გაქვს?</label>
                <input 
                  type="range" 
                  min="0" 
                  max="1000" 
                  value={bottlesInput} 
                  onChange={(e) => setBottlesInput(e.target.value)}
                  className="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-600"
                />
                <div className="mt-4 flex justify-between items-center bg-gray-50 p-4 rounded-xl border border-gray-200">
                  <span className="text-gray-500 font-medium">რაოდენობა:</span>
                  <span className="text-3xl font-bold text-green-600">{bottlesInput} <span className="text-sm text-gray-400">ცალი</span></span>
                </div>
              </div>

              <div className="bg-green-50 rounded-xl p-6 border border-green-100 text-center">
                <p className="text-gray-600 mb-2">ამ რაოდენობით ჩვენ დავამზადებთ:</p>
                <div className="text-5xl font-extrabold text-green-700 mb-2 transition-all scale-100 transform duration-300">
                  {tilesCreated}
                </div>
                <p className="font-bold text-green-800 uppercase tracking-wide">ეკო-ფილას</p>
                <p className="text-xs text-green-600 mt-2">* 1 ფილა = დაახლოებით 50 ბოთლი</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Products Section */}
      <section id="products" className="py-20 bg-gray-50">
        <div className="container mx-auto px-6">
          <div className="text-center mb-16">
            <h2 className="text-3xl font-bold text-gray-800">ჩვენი პროდუქცია</h2>
            <p className="mt-4 text-gray-600">გამძლე, ლამაზი და 100%-ით გადამუშავებული</p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {products.map((prod, i) => (
              <div key={i} className="group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                <div 
                  className="h-48 w-full relative"
                  style={{ background: prod.image }}
                >
                  <div className="absolute inset-0 bg-black/10 group-hover:bg-transparent transition-all"></div>
                  {/* Mock Product Icon Placeholder */}
                  <div className="absolute inset-0 flex items-center justify-center">
                     <Package className="text-white w-16 h-16 opacity-80" />
                  </div>
                </div>
                <div className="p-6">
                  <h3 className="text-xl font-bold text-gray-800 mb-2">{prod.name}</h3>
                  <p className="text-gray-600 mb-4">{prod.desc}</p>
                  <button className="text-green-600 font-bold flex items-center gap-1 group-hover:gap-2 transition-all">
                    დეტალურად <ArrowRight size={16} />
                  </button>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="bg-gray-900 text-white py-12 border-t-4 border-green-500">
        <div className="container mx-auto px-6">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="col-span-1 md:col-span-2">
              <div className="flex items-center gap-2 mb-4">
                <Recycle className="text-green-400" />
                <span className="text-2xl font-bold">Eco-Cycle</span>
              </div>
              <p className="text-gray-400 max-w-sm">
                ჩვენ ვზრუნავთ გარემოზე ნარჩენების შემცირებით და მათი სასარგებლო რესურსად ქცევით. ერთად შევქმნათ სუფთა მომავალი!
              </p>
            </div>
            
            <div className="flex flex-col items-start md:items-end">
              <h4 className="font-bold text-lg mb-4">ნავიგაცია</h4>
              <ul className="space-y-2 text-gray-400 text-left md:text-right">
                <li><a href="#" className="hover:text-green-400 transition">მთავარი</a></li>
                <li><a href="#" className="hover:text-green-400 transition">ჩვენ შესახებ</a></li>
                <li><a href="#" className="hover:text-green-400 transition">პარტნიორები</a></li>
              </ul>
            </div>
          </div>
          <div className="border-t border-gray-800 mt-12 pt-8 text-center text-gray-500 text-sm">
            © 2024 Eco-Cycle. ყველა უფლება დაცულია. შექმნილია სასკოლო პროექტისთვის.
          </div>
        </div>
      </footer>
    </div>
  );
};

export default EcoCycleApp;
